{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImage(query, currentPage) {\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n  const params = {\n    key: '42982989-b171e2f7a41a03eb4f5866708',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n  const res = await axios.get('', { params });\n  return res.data;\n}\n","import { gallery } from '../main';\n\nfunction galleryTemplate(arr) {\n  return arr\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n        ...info\n      }) => ` <div class=\"thumb\">\n      <li class=\"gallery-item\">\n        <div class=\"lightbox\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"\n          /></a>\n        </div>\n        <ul class=\"gallery-data-list\">\n          <li class=\"gallery-data-item\">\n            <h3>Likes</h3>\n            <p>${likes}</p>\n          </li>\n          <li class=\"gallery-data-item\">\n            <h3>Views</h3>\n            <p>${views}</p>\n          </li>\n          <li class=\"gallery-data-item\">\n            <h3>Comment</h3>\n            <p>${comments}</p>\n          </li>\n          <li class=\"gallery-data-item\">\n            <h3>Downloads</h3>\n            <p>${downloads}</p>\n          </li>\n        </ul>\n      </li>\n    </div>\n`\n    )\n    .join('');\n}\n\nexport function renderGallery(arr) {\n  const markup = galleryTemplate(arr);\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImage } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst searchForm = document.querySelector('.search-form');\nexport const gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.btn-load');\nconst galleryItem = document.querySelector('.gallery-item');\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nlet lightbox = new SimpleLightbox('.lightbox a', { captionsData: 'alt' });\nlightbox.on('show.simplelightbox', function () {});\n\nshowLoader();\nsetTimeout(hideLoader, 100);\n\nsearchForm.addEventListener('submit', onSubmit);\nloadBtn.addEventListener('click', onLoadMoreClick);\n\nasync function onSubmit(evt) {\n  evt.preventDefault();\n  hideLoadMore();\n  showLoader();\n  gallery.innerHTML = '';\n  query = evt.target.elements.search.value.trim();\n  currentPage = 1;\n\n  if (!query) {\n    iziToast.show({\n      message: 'Please fill in the field!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n    hideLoader();\n    return;\n  }\n\n  let data;\n\n  try {\n    data = await getImage(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / pageSize);\n\n    lightbox.refresh();\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        maxWidth: '432px',\n        height: '48px',\n        theme: 'dark',\n        progressBarColor: '#FFFFFF',\n        color: '#EF4040',\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      renderGallery(data.hits);\n    }\n  } catch (err) {\n    iziToast.error({\n      maxWidth: '432px',\n      height: '48px',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n      message: 'Sorry, an error occurred while loading. Please try again!',\n    });\n  }\n\n  hideLoader();\n\n  if (data.hits.length !== 0) {\n    checkBtnStatus();\n  }\n  evt.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  hideLoadMore();\n  showLoader();\n  try {\n    const data = await getImage(query, currentPage);\n    renderGallery(data.hits);\n    lightbox.refresh();\n  } catch (err) {\n    iziToast.error({\n      maxWidth: '432px',\n      height: '48px',\n      message: 'Sorry, an error occurred while loading. Please try again!',\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: '#EF4040',\n      position: 'topRight',\n    });\n  }\n\n  hideLoader();\n  myScroll();\n  checkBtnStatus();\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showLoadMore() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  loadBtn.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.show({\n      maxWidth: '432px',\n      height: '48px',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      theme: 'dark',\n      progressBarColor: '#FFFFFF',\n      color: 'blue',\n      position: 'topRight',\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction myScroll() {\n  const height = gallery.getBoundingClientRect().height;\n  scrollBy({\n    top: height,\n    behavior: 'smooth',\n  });\n}\n"],"names":["getImage","query","currentPage","axios","params","galleryTemplate","arr","largeImageURL","webformatURL","tags","likes","views","comments","downloads","info","renderGallery","markup","gallery","searchForm","loader","loadBtn","maxPage","pageSize","lightbox","SimpleLightbox","showLoader","hideLoader","onSubmit","onLoadMoreClick","evt","hideLoadMore","iziToast","data","checkBtnStatus","myScroll","showLoadMore","height"],"mappings":"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"}